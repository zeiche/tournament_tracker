
; twilio sip trunk configuration
; generated by bonjour_twilio module

; transport
[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060
external_media_address=64.111.98.139
external_signaling_address=64.111.98.139
local_net=192.168.0.0/16

[transport-tcp]
type=transport
protocol=tcp
bind=0.0.0.0:5060

[transport-tls]
type=transport
protocol=tls
bind=0.0.0.0:5061
cert_file=/etc/asterisk/certs/asterisk.crt
priv_key_file=/etc/asterisk/certs/asterisk.key
method=tlsv1_2

; twilio trunk endpoint
[twilio]
type=endpoint
transport=transport-udp
context=from-twilio
disallow=all
allow=ulaw
allow=alaw
allow=g722
allow=opus
outbound_auth=twilio-auth
aors=twilio
identify_by=auth_username
direct_media=no
force_rport=yes
ice_support=yes
media_encryption=no
rtp_symmetric=yes
rewrite_contact=yes
send_rpid=yes
trust_id_inbound=yes
trust_id_outbound=yes
language=en
t38_udptl=no
t38_udptl_nat=no
dtmf_mode=rfc4733

; authentication
[twilio-auth]
type=auth
auth_type=userpass
username=your-sip-username
password=your-sip-password

; aor (address of record)
[twilio]
type=aor
contact=sip:your-domain.sip.twilio.com
qualify_frequency=60
max_contacts=1

; registration (if using registration)
[twilio-reg]
type=registration
transport=transport-udp
outbound_auth=twilio-auth
server_uri=sip:your-domain.sip.twilio.com
client_uri=sip:your-username@your-domain.sip.twilio.com
retry_interval=60
forbidden_retry_interval=600
expiration=3600

; identify (for incoming calls)
[twilio]
type=identify
endpoint=twilio
match=54.172.60.0/30
match=54.244.51.0/30
match=54.171.127.192/30
match=35.156.191.128/30
match=54.65.63.192/30
match=54.169.127.128/30
match=54.252.254.64/30
match=177.71.206.192/30

; acl for security
[acl-twilio]
type=acl
deny=0.0.0.0/0.0.0.0
permit=54.172.60.0/30
permit=54.244.51.0/30
permit=54.171.127.192/30
permit=35.156.191.128/30
permit=54.65.63.192/30
permit=54.169.127.128/30
permit=54.252.254.64/30
permit=177.71.206.192/30
